#!/usr/bin/env dash
# I compile slow/heavy packages on my desktop and rsync them over to my laptop

# make sure we're in the right location
cd || exit 1

# Update binaries
rsync -azuP ~/Executables/stack/bin rkumar@rkumarlappie:/home/rkumar/Executables/stack &
rsync -azuP --exclude 'bin/alacritty' ~/Executables/lappie/Executables/cargo/bin rkumar@rkumarlappie:/home/rkumar/Executables/cargo &
ssh rkumar@rkumarlappie mkdir -p /home/rkumar/Executables/ghq/github.com/skywind3000/
rsync -azuP ~/Executables/lappie/Executables/ghq/github.com/skywind3000/czmod rkumar@rkumarlappie:/home/rkumar/Executables/ghq/github.com/skywind3000 &
rsync -azuP ~/.local/share/newsboat/cache.db rkumar@rkumarlappie:/home/rkumar/.local/share/newsboat &
rsync -auP ~/.local/share/buku rkumar@rkumarlappie:/home/rkumar/.local/share &
rsync -azuP ~/Executables/go/bin rkumar@rkumarlappie:/home/rkumar/Executables/go
rsync -azuP ~/.local/libexec/cni ~/.local/libexec/revokefs-fuse rkumar@rkumarlappie:/home/rkumar/.local
rsync -azuP --exclude '.local/lib/python*' ~/.local/lib rkumar@rkumarlappie:/home/rkumar/.local
rsync -azuP ~/.local/bin/fuse-overlayfs ~/.local/bin/fusermount3 rkumar@rkumarlappie:/home/rkumar/.local/bin
rsync -azuP ~/Executables/lappie/.config ~/Executables/lappie/.local rkumar@rkumarlappie:/home/rkumar
zsh_bin_path="$HOME/Executables/lappie/Executables/zsh-bin"
zsh_version="$("$zsh_bin_path/bin/zsh" --version | awk '{print $2}')"
rsync -azuP "$zsh_bin_path" rkumar@rkumarlappie:/home/rkumar/Executables/
# shellcheck disable=SC2029 # I want this to expand on the client side
ssh rkumar@rkumarlappie "/home/rkumar/Executables/zsh-bin/share/zsh/$zsh_version/scripts/relocate"
# vi:ft=sh
